# ******************************************************************************

# ====================
# HTTP Server settings
# ====================

# ----------------------
# X509IDMGMT_SERVER_PORT
# ----------------------
x509idmgmt.server.port:integer=3000

# ----------------------
# X509IDMGMT_SERVER_CERT
# ----------------------
#x509idmgmt.server.cert:string=/path/to/the/certificate-file.pem

# ---------------------
# X509IDMGMT_SERVER_KEY
# ---------------------
#x509idmgmt.server.key:string=/path/to/the/private.key

# --------------------
# X509IDMGMT_SERVER_CA
# --------------------
#x509idmgmt.server.ca:string=/path/to/the/ca-certificate-file.pem

# ******************************************************************************

# ==========================
# Express Framework settings
# ==========================

# -------------------------------
# X509IDMGMT_FRAMEWORK_TRUSTPROXY
# -------------------------------
# By enabling the trust proxy feature, the IP address will be
# updated in the correct places with the forwarded IP.
# It will also be available on the req object.
# Note: If the app is running behind a reverse proxy, it is
# necessary to configure the reverse proxy to forward the
# client's real IP address.
# Enabling trust proxy will have the following impact:
# -> The value of req.hostname is derived from the value set in
#    the X-Forwarded-Host header, which can be set by the client
#    or by the proxy.
# -> X-Forwarded-Proto can be set by the reverse proxy to tell
#    the app whether it is https or http or even an invalid name.
#    This value is reflected by req.protocol.
# -> The req.ip and req.ips values are populated with the list of
#    addresses from X-Forwarded-For.
# http://expressjs.com/en/guide/behind-proxies.html
# --------------------------------
x509idmgmt.framework.trustproxy:boolean=true

# ------------------------------
# X509IDMGMT_FRAMEWORK_LOGFORMAT
# ------------------------------
x509idmgmt.framework.logformat:string=:remote-addr - :remote-user :id ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"

# --------------------------------------
# X509IDMGMT_FRAMEWORK_BODYPARSER_LIMIT
# --------------------------------------
x509idmgmt.framework.bodyparser.limit:string=100kb

# -----------------------------------
# X509IDMGMT_FRAMEWORK_PAGINATE_LIMIT
# -----------------------------------
x509idmgmt.framework.paginate.limit:integer=25

# ---------------------------------------
# X509IDMGMT_FRAMEWORK_PAGINATE_MAXLIMIT
# ---------------------------------------
x509idmgmt.framework.paginate.maxlimit:integer=250

# ******************************************************************************

# ==========================
# EJBCA Integration settings
# ==========================

# -----------------------------
# X509IDMGMT_EJBCA_HEALTHCHECK
# -----------------------------
x509idmgmt.ejbca.healthcheck:string=http://127.0.0.1:8080/ejbca/publicweb/healthcheck/ejbcahealth

# ---------------------
# X509IDMGMT_EJBCA_WSDL
# ---------------------
x509idmgmt.ejbca.wsdl:string=https://127.0.0.1:8443/ejbca/ejbcaws/ejbcaws?wsdl

# -----------------------
# X509IDMGMT_EJBCA_PKCS12
# -----------------------
x509idmgmt.ejbca.pkcs12:string=/opt/tls/ejbcaclient.p12

# -----------------------------
# X509IDMGMT_EJBCA_PKCS12SECRET
# -----------------------------
x509idmgmt.ejbca.pkcs12secret:string=/opt/tls/ejbcaclient.secret

# --------------------------
# X509IDMGMT_EJBCA_TRUSTEDCA
# --------------------------
x509idmgmt.ejbca.trustedca:string=/opt/tls/ejbcaclient-trustedca.pem

# ------------------------------
# X509IDMGMT_EJBCA_FORCECRLRENEW
# ------------------------------
x509idmgmt.ejbca.forcecrlrenew:boolean=false

# -----------------------
# X509IDMGMT_EJBCA_ROOTCA
# -----------------------
x509idmgmt.ejbca.rootca:string=X509 Identity CA

# ******************************************************************************

# ============================
# Certificate Control Settings
# ============================

# -------------------------------------------
# X509IDMGMT_CERTIFICATE_SUBJECT_ALLOWEDATTRS
# -------------------------------------------
x509idmgmt.certificate.subject.allowedattrs:string[]=['CN']

# ------------------------------------------------------
# X509IDMGMT_CERTIFICATE_SUBJECT_ALLOWEDATTRSCONSTRAINTS
# ------------------------------------------------------
x509idmgmt.certificate.subject.allowedattrsconstraints:string[]=['CN=^[0-9A-Za-z ]{1,255}$']

# ---------------------------------------------
# X509IDMGMT_CERTIFICATE_SUBJECT_MANDATORYATTRS
# ---------------------------------------------
x509idmgmt.certificate.subject.mandatoryattrs:string[]=['CN']

# ----------------------------------------------
# X509IDMGMT_CERTIFICATE_SUBJECT_CONSTANTATTRS_O
# ----------------------------------------------
x509idmgmt.certificate.subject.constantattrs.o:string=dojot IoT Platform

# -------------------------------
# X509IDMGMT_CERTIFICATE_VALIDITY
# -------------------------------
x509idmgmt.certificate.validity:integer=365

# -------------------------------------
# X509IDMGMT_CERTIFICATE_CHECKPUBLICKEY
# -------------------------------------
x509idmgmt.certificate.checkpublickey:boolean=true

# ******************************************************************************

# ===============================
# MongoDBClient/mongoose Settings
# ===============================
# Settings related to mongoDBClient/mongoose connections/queries:
# http://mongodb.github.io/node-mongodb-native/3.5/api/MongoClient.html#.connect
# https://mongoosejs.com/docs/connections.html
# -------------------------------

# -------------------------
# X509IDMGMT_MONGO_CONN_URI
# -------------------------
# https://docs.mongodb.com/manual/reference/connection-string/
# -------------------------
x509idmgmt.mongo.conn.uri:string=mongodb://127.0.0.1:27017/x509-identity-mgmt

# ----------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_USER
# ----------------------------------
# The username for auth (e.g. 'root')
# ----------------------------------
#x509idmgmt.mongo.conn.options.user:string=root

# ----------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_PASS
# ----------------------------------
# The password for auth (e.g. 'pass')
# ----------------------------------
#x509idmgmt.mongo.conn.options.pass:string=pass

# ----------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_AUTHSOURCE
# ----------------------------------------
# Define the database to authenticate against (e.g. 'admin')
# ----------------------------------------
#x509idmgmt.mongo.conn.options.authsource:string=admin

# ---------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_AUTOINDEX
# ---------------------------------------
# By default, mongoose will automatically build indexes defined in
# your schema when it connects. This is great for development, but
# not ideal for large production deployments, because index builds
# can cause performance degradation. If you set autoIndex to false,
# mongoose will not automatically build indexes for any model
# ---------------------------------------
x509idmgmt.mongo.conn.options.autoindex:boolean=true

# --------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_POOLSIZE
# --------------------------------------
# The maximum number of sockets the MongoDB driver will keep open
# ---------------------------------------
x509idmgmt.mongo.conn.options.poolsize:integer=100

# ------------------------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_SERVERSELECTIONTIMEOUTMS
# ------------------------------------------------------
# How long to wait for a connection to be established before timing out
# ------------------------------------------------------
x509idmgmt.mongo.conn.options.serverselectiontimeoutms:integer=30000

# --------------------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_HEARTBEATFREQUENCYMS
# --------------------------------------------------
# controls when the driver checks the state of the MongoDB deployment.
# Specify the interval (in milliseconds) between checks
# --------------------------------------------------
x509idmgmt.mongo.conn.options.heartbeatfrequencyms:integer=10000

# ---------------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_SOCKETTIMEOUTMS
# ---------------------------------------------
# How long a send or receive on a socket can take before timing out
# ---------------------------------------------
x509idmgmt.mongo.conn.options.sockettimeoutms:integer=360000

# ------------------------------------
# X509IDMGMT_MONGO_CONN_OPTIONS_FAMILY
# ------------------------------------
# Version of IP stack. Can be 4, 6 or 0 (default).
# if 0, will attempt to connect with IPv6, and
# will fall back to IPv4 on failure
# ------------------------------------
x509idmgmt.mongo.conn.options.family:integer=0

# --------------------------------
# X509IDMGMT_MONGO_QUERY_MAXTIMEMS
# --------------------------------
# Sets the maxTimeMS option. This will tell the MongoDB server to abort
# if the query or write op has been running for more than ms milliseconds.
# --------------------------------
x509idmgmt.mongo.query.maxtimems:integer=30000

# ******************************************************************************

# ===============
# Logger Settings
# ===============

# -------------------------
# X509IDMGMT_LOGGER_VERBOSE
# -------------------------
x509idmgmt.logger.verbose:boolean=false


# -------------------------------
# X509IDMGMT_LOGGER_CONSOLE_LEVEL
# -------------------------------
x509idmgmt.logger.console.level:string=INFO

# ----------------------------
# X509IDMGMT_LOGGER_FILE_LEVEL
# ----------------------------
#x509idmgmt.logger.file.level:string=DEBUG

# ---------------------------
# X509IDMGMT_LOGGER_FILE_NAME
# ---------------------------
#x509idmgmt.logger.file.name:string=/var/log/x509-identity-mgmt-logs-%DATE%.log
